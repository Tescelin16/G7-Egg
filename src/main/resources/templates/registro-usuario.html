<!DOCTYPE html>
<html lang="es" dir="ltr" xmlns: th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
        <title>Formulario Registro - Turismo</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
              integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">
        <link rel="stylesheet" th:href="@{/css/style.css}"/>
    </head>
    <body>
        <header th:replace="fragments :: header"></header>
        <nav th:replace="fragments :: navbar"></nav>

        <div class="container mt-5 main">
            <h1 th:text="${title}"></h1>
            <hr class="mb-5 col-xl-12"/>
            <div th:if="${mensaje != null}" class="alert alert-success" th:text="${mensaje}"></div>
            <div th:if="${error != null}" class="alert alert-danger" th:text="${error}"></div>
            <form id="formulario" class="needs-validation" th:action="@{/usuarios/__${action}__}" method="POST"
                  th:object="${usuario}" autocomplete="off" novalidate>
                <div class="form-floating mb-3 col-xl-6">
                    <input id="dni" class="form-control" type="number" placeholder="Documento" th:field="*{dni}" required
                           th:readonly="${usuario.dni != null}"/>
                    <label for="dni">Documento</label>
                    <div class="invalid-feedback">El documento es obligatorio</div>
                </div>
                <div class="form-floating mb-3 col-xl-6">
                    <input id="nombre" class="form-control" type="text" placeholder="Nombre" th:field="*{nombre}" required/>
                    <label for="nombre">Nombre</label>
                    <div class="invalid-feedback">El nombre es obligatorio</div>
                </div>
                <div class="form-floating mb-3 col-xl-6">
                    <input id="apellido" class="form-control" type="text" placeholder="Apellido" th:field="*{apellido}" required/>
                    <label for="apelldo">Apellido</label>
                    <div class="invalid-feedback">El apellido es obligatorio</div>
                </div>
                <div class="form-floating mb-3 col-xl-6">
                    <input id="usuario" class="form-control" type="text" placeholder="Nombre de Usuario" th:field="*{username}" required/>
                    <label for="usuario">Nombre de Usuario</label>
                    <div class="invalid-feedback">El nombre de usuario es obligatorio</div>
                </div>
                <div class="form-floating mb-3 col-xl-6">
                    <input id="contraseña" class="form-control" type="password" placeholder="Contraseña" th:field="*{clave}" required/>
                    <label for="contraseña">Contraseña</label>
                    <div class="invalid-feedback">La contraseña es obligatorio</div>
                </div>

                <div class="form-floating mb-3 col-xl-6">
                    <input id="telefono" class="form-control" type="text" placeholder="Telefono" th:field="*{telefono}" required/>
                    <label for="telefono">Telefono</label>
                    <div class="invalid-feedback">El telefono es obligatorio</div>
                </div>
                <div class="form-floating mb-3 col-xl-6">
                    <input id="telefono2" class="form-control" type="text" placeholder="Segundo telefono" th:field="*{telefono2}" required/>
                    <label for="telefono2">Telefono2</label>
                    <div class="invalid-feedback">El segundo telefono es obligatorio</div>
                </div>
                <div class="form-floating mb-3 col-xl-6">
                    <input id="mail" class="form-control" type="text" placeholder="Email" th:field="*{email}" required/>
                    <label for="email">Email</label>
                    <div class="invalid-feedback">El email es obligatorio</div>
                </div>
                <div class="form-floating mb-3 col-xl-6">
                    <input id="fechaNacimiento" class="form-control" type="date" th:field="*{fechaNacimiento}" required/>
                    <label for="fechaNacimiento">Fecha de nacimiento</label>
                    <div class="invalid-feedback">La fecha de nacimiento es obligatoria</div>
                </div>
                <div sec:authorize="hasRole('ADMIN')" class="form-floating mb-3 col-xl-6">
                    <select id="rol" class="form-select" aria-label="Elegir Rol" th:field="*{rol}">
                        <option value="" selected>Seleccionar Rol</option>
                        <option th:each="rol : ${roles}" th:text="${rol.nombre}"
                        th:value="${rol.idRol}"></option>
                    </select>
                </div>
                <div class="row">
                    <div class="col-xl-3">
                        <button class="btn btn-success" type="submit"
                                th:text="${action == 'guardar'} ? 'Crear Usuario' : 'Guardar cambios'"></button>
                    </div>
                </div>
            </form>
        </div>
        <footer th:replace="fragments :: footer"></footer>
        <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://kit.fontawesome.com/5b85ec102f.js"
      crossorigin="anonymous"
    ></script>
    </body>
</html>

